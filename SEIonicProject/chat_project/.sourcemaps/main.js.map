{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/providers/auth/auth.service.ts","../../src/providers/data/data.service.ts","../../src/providers/chat/chat.service.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/app/app.firebase.config.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 229;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 229\n// module chunks = 10","var map = {\n\t\"../pages/channel-chat/channel-chat.module\": [\n\t\t583,\n\t\t8\n\t],\n\t\"../pages/channels/channels.module\": [\n\t\t585,\n\t\t7\n\t],\n\t\"../pages/edit-profile/edit-profile.module\": [\n\t\t584,\n\t\t6\n\t],\n\t\"../pages/inbox/inbox.module\": [\n\t\t586,\n\t\t5\n\t],\n\t\"../pages/login/login.module\": [\n\t\t587,\n\t\t4\n\t],\n\t\"../pages/message/message.module\": [\n\t\t588,\n\t\t3\n\t],\n\t\"../pages/profile/profile.module\": [\n\t\t589,\n\t\t2\n\t],\n\t\"../pages/register/register.module\": [\n\t\t590,\n\t\t0\n\t],\n\t\"../pages/search-user/search-user.module\": [\n\t\t591,\n\t\t1\n\t],\n\t\"../pages/tabs/tabs.module\": [\n\t\t592,\n\t\t9\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 270;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 270\n// module chunks = 10","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Account } from '../../models/account/account.interface';\nimport { LoginResponse } from '../../models/login/login-response.interface';\n\n@Injectable()\nexport class AuthProvider {\n\n  constructor(private auth: AngularFireAuth) {  }\n\n  async signInWithEmailAndPassword(account: Account) {\n    try {\n      return <LoginResponse> {\n        result: await this.auth.auth.signInWithEmailAndPassword(account.email, account.password)\n      };\n    }\n    catch(e) {\n      return <LoginResponse> {\n        error: e\n      };\n    }\n  }\n\n  async createUserWithEmailAndPassword(account: Account) {\n    try {\n      return <LoginResponse> {\n        result: await this.auth.auth.createUserWithEmailAndPassword(account.email, account.password)\n      }\n    }\n    catch(e) {\n      return <LoginResponse> {\n        error: e\n      }\n    }\n  }\n\n  getAuthenticatedUser() {\n    return this.auth.authState;\n  }\n\n  signOut(): Promise<void> {\n    return this.auth.auth.signOut();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.service.ts","import { Injectable } from '@angular/core';\nimport { AngularFireDatabase, AngularFireObject, AngularFireList } from '@angular/fire/database';\nimport { User, database } from 'firebase/app';\nimport { Profile } from '../../models/profile/profile.interface';\nimport { UUID } from 'angular2-uuid';\n\n@Injectable()\nexport class DataProvider {\n\n  profileObject: AngularFireObject<Profile>;\n  profileList: AngularFireList<Profile>;\n\n  constructor(private database: AngularFireDatabase) {\n  }\n\n  async saveProfile(user: User, profile: Profile) {\n    this.profileObject = this.database.object(`/profiles/${user.uid}`);\n\n    try {\n      profile.mykey = UUID.UUID();\n      await this.profileObject.set(profile);\n      return true;\n    }\n    catch(e) {\n      console.error(e);\n      return false;\n    }\n  }\n\n  getProfile(user: User) {\n    this.profileObject = this.database.object(`/profiles/${user.uid}`);\n    return this.profileObject.valueChanges();\n  }\n\n  searchUser(firstName: string) {\n    const query = this.database.list('/profiles', query => query.orderByChild('firstName').equalTo(firstName));\n\n    return query.valueChanges();\n  }\n\n  setUserOnline(profile: Profile) {\n    const ref = database().ref(`online-users/${profile.mykey}`);\n\n    try {\n      ref.update({ ...profile});\n      ref.onDisconnect().remove();\n    }\n    catch(e) {\n      console.error(e);\n    }\n  }\n\n  getOnlineUsers(): AngularFireList<Profile[]> {\n    return <any>this.database.list(`online-users`).valueChanges();\n  }\n\n  deleteUserLogoutOnline(key: string) {\n    database().ref(`/online-users/${key}`).remove();\n  }\n\n  getAllUsers() {\n    return <any>this.database.list(`profiles`).valueChanges();\n  }\n  /*getAuthenticatedUserProfile() {\n    return this.auth.getAuthenticatedUser().pipe(map(user => user.uid), mergeMap(authId => this.database.object(`profiles/${authId}`).snapshotChanges()))\n  }*/\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/data/data.service.ts","import { Injectable, Output, EventEmitter } from \"@angular/core\";\nimport { AngularFireDatabase, AngularFireList } from \"@angular/fire/database\";\nimport { Channel } from \"../../models/channel/channel.interface\";\nimport { ChannelMessage } from \"../../models/channel/channel-message.interface\";\nimport { Message } from \"../../models/messages/message.interface\";\nimport { UUID } from 'angular2-uuid';\nimport { Observable} from \"rxjs/Rx\";\nimport { Profile } from \"../../models/profile/profile.interface\";\n\n@Injectable()\nexport class ChatService {\n\n    keys: Observable<{}[]>;\n    private userProfile: Profile;\n    messages: Message[] = [];\n    lastMessages: Message[] = [];\n    filteredArray: Message[];\n\n    @Output() chat = new EventEmitter<Message[]>();\n    @Output() last = new EventEmitter<Message[]>();\n\n    constructor(private database: AngularFireDatabase) {\n\n    }\n\n    addChannel(channelName: string) {\n        this.database.list(`channel-names`).push({ name: channelName, mykey: UUID.UUID() });\n    }\n\n    getChannelListRef(): AngularFireList<Channel> {\n        return <any>this.database.list(`channel-names`).valueChanges();\n    }\n\n    getChannelChatRef(channelKey: string): AngularFireList<ChannelMessage[]> {\n        return <any>this.database.list(`channels/${channelKey}`).valueChanges();\n    }\n\n    async sendChannelChatMessage(channelKey: string, message: ChannelMessage) {\n        await this.database.list(`channels/${channelKey}`).push(message);\n    }\n\n    async sendChat(message: Message) {\n        await this.database.list(`/messages`).push(message);\n    }\n\n    getChats(userTwoId: string) {\n      this.userProfile = JSON.parse(localStorage.getItem('selectedUser'));\n      this.database.list(`/messages/`).valueChanges().subscribe((message: Message[]) => {\n        this.messages.splice(0);\n        Object.keys(message).forEach(k => {\n          if((message[k].userFromId === userTwoId && message[k].userToId === this.userProfile.mykey) ||\n            (message[k].userToId === userTwoId && message[k].userFromId === this.userProfile.mykey)){\n              this.messages.push(message[k]);\n          }\n        })\n        this.chat.emit(this.messages);\n      });\n    }\n\n    getLastMessageForUser() {\n      this.userProfile = JSON.parse(localStorage.getItem('selectedUser'));\n      this.database.list(`/last-messages/${this.userProfile.mykey}`).valueChanges().subscribe(data => {\n        this.database.list(`/messages/`).valueChanges().subscribe((lastmessages: Message[]) => {\n          this.lastMessages.splice(0);\n          for (let key of data) {\n            Object.keys(lastmessages).forEach(k => {\n              if (lastmessages[k].mykey === key['key'] && lastmessages[k].userToId === this.userProfile.mykey) {\n                this.lastMessages.push(lastmessages[k]);\n              }\n            })\n          }\n          this.last.emit(this.lastMessages);\n        })\n      })\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/chat/chat.service.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { AngularFireModule } from '@angular/fire';\nimport { HttpModule } from '@angular/http';\nimport { AngularFireDatabaseModule} from '@angular/fire/database';\n\nimport { MyApp } from './app.component';\nimport { FIREBASE_CONFIG } from './app.firebase.config';\nimport { AuthProvider } from '../providers/auth/auth.service';\nimport { AngularFireAuthModule } from '@angular/fire/auth';\nimport { DataProvider } from '../providers/data/data.service';\nimport { FormsModule } from '@angular/forms';\nimport { ChatService } from '../providers/chat/chat.service';\n\n@NgModule({\n  declarations: [\n    MyApp\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    IonicModule.forRoot(MyApp),\n    AngularFireModule.initializeApp(FIREBASE_CONFIG),\n    AngularFireAuthModule,\n    AngularFireDatabaseModule,\n    FormsModule\n  ],\n  bootstrap: [\n    IonicApp\n  ],\n  entryComponents: [\n    MyApp\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    AuthProvider,\n    DataProvider,\n    ChatService\n  ]\n})\nexport class AppModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  // classe che si vuole caricare. in questo caso si riferisce alla login.ts\n  rootPage: string;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    //this.auth.getAuthenticatedUser().subscribe(auth => {\n      //!auth ? this.rootPage = 'LoginPage' : this.rootPage = 'MessagePage';\n    //})\n\n    platform.ready().then(() => {\n\n      this.rootPage = 'LoginPage';\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","// Initialize Firebase\nexport const FIREBASE_CONFIG = {\n  apiKey: \"AIzaSyBgrJ8g-14c6SSoz4zOqyF-MJBEYUNcdWY\",\n  authDomain: \"ionic-chat-44e31.firebaseapp.com\",\n  databaseURL: \"https://ionic-chat-44e31.firebaseio.com\",\n  projectId: \"ionic-chat-44e31\",\n  storageBucket: \"ionic-chat-44e31.appspot.com\",\n  messagingSenderId: \"796870014522\"\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.firebase.config.ts"],"sourceRoot":""}